<!DOCTYPE html>
<html>
  <head>
    <title>radar - High level API and backend for writing web apps that use push messaging</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="../assets/css/gh.css"/>
    <link rel="stylesheet" href="assets/css/style.css">
    <link type="text/css" rel="stylesheet" href="assets/css/prettify.css"/>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/prettify.js"></script>

  </head>
<body onload="prettyPrint()">

  <div id="toc">
    <div id="toc-inner">
      <h4>Table of contents</h4>

      <a href="index.html">
        <h5>Overview &amp; quickstart</h5>
      </a>

      <a href="client.html">
        <h5>Radar client</h5>
      </a>

      <a href="server.html">
        <h5>Radar server</h5>
      </a>

      <a href="rest.html">
        <h5>REST API</h5>
      </a>

      <a href="https://github.com/zendesk/radar" target="_blank">
        <h5>Full source code on Github</h5>
      </a>

      <a href="http://www.zendesk.com/company/careers?jvi=oHiWWfwB,Job" target="_blank">
        <h5>Zendesk is hiring Radar developers</h5>
      </a>

    </div>
  </div>

  <div id="wrapper">
    <div id="header">

    </div>

    <div class="clear"></div>
    <div id="main">
      <div id="content" class="post">


      <h1>radar</h1>
<h2>High level API and backend for writing web apps that use push messaging</h2>
<h3>Features</h3>
<ul class="list">
<li>more than just pub/sub: a resource-based API for presence, messaging and push notifications via a Javascript client library</li>
<li>REST API for working with web apps that don&#39;t use Node</li>
<li>written in Javascript/Node.js, and uses engine.io (the new, lower-level complement to socket.io)</li>
<li>backend which can utilize to multiple front-facing servers to serve requests.</li>
</ul>
<h2>What is Radar and how is it different from (Socket.io|Sockjs|Faye|Meteor)?</h2>
<p>Radar is built on top of <a href="https://github.com/learnboost/engine.io">Engine.io</a>, the next generation backend for Socket.io. It uses Redis for backend storage, though the assumption is that this is only for storing currently active data.</p>
<p>Radar basically solves a number of real-world problems that need to solved, and it reduces the need for specialized backend services by providing good primitive operations.</p>
<ul class="list">
<li><p>Radar has higher level APIs that cover basic use cases such as presence, persisted message channels. Many push notification frameworks only expose message passing and do not explicitly handle having multiple backend servers, leaving the implementation for their users. Radar provides higher level constructs, so that you are for example:</p>
<ul class="list">
<li>subscribing to notifications about a user going online/offline</li>
<li>subscribing to notifications about changes to a shared variable in a database</li>
<li>sending messages to a channel</li>
</ul>
<p>... rather than just passing messages. More complex systems can be built by combining the Radar API resources.</p>
</li>
<li>REST API for interacting with Radar resources from non-Node web frameworks.</li>
<li>Configurable authentication for resources. You can restrict access based on a token.</li>
<li>Robust recovery. Radar takes care of re-establishing subscriptions in the event of a server error. Other frameworks can recover a connection, but not the application-level subscriptions and state.</li>
<li>Multi-server support via shared Redis instance. Add capacity by adding new server instances behind a load balancer.</li>
<li>Persistence. Messages can be stored (for long-ish terms) in the backend. For example, you might want to be able to send recent messages to new users joining a chat - this can be configured via a policy.</li>
<li>Library, not a framework. Doesn&#39;t require code changes or structural changes beyond responding to the events from the backend.</li>
</ul>
<h2>Quickstart: let&#39;s write a Radar application</h2>
<p>This tutorial will walk you through the process of implementing a chat server using Radar. The source code to a full example is also bundled in the radar (server) repository under <code>./sample</code>.</p>
<h3>1. Setting up the server</h3>
<p>Let&#39;s start by getting the Radar server up and running.</p>
<p>Create a <code>package.json</code> file by running <code>npm init</code> for your new project; then run <code>npm install --save radar</code>. This installs the Radar server library and also adds the dependency to the <code>package.json</code> file.</p>
<p>Now, let&#39;s require the Radar server library and attach it to a HTTP server:</p>
<pre>var http = require(&#39;http&#39;),
    Radar = require(&#39;radar&#39;).server;

var server = http.createServer(function(req, res) {
  console.log(&#39;404&#39;, req.url);
  res.statusCode = 404;
  res.end();
});

// attach Radar server to the http server
Radar.attach(server, {
  redis_host: &#39;localhost&#39;,
  redis_port: 6379
});

server.listen(8000);
console.log(&#39;Server listening on localhost:8000&#39;);</pre>
<p>Note that you need to have Redis running for Radar to work. Save this as &quot;server.js&quot; and run it with &quot;node server.js&quot;.</p>
<h3>2. Setting up the client</h3>
<p>First, add the radar client to our package.json:</p>
<pre>npm install --save radar_client</pre>
<p>The Radar client has two dependencies:</p>
<ul class="list">
<li><a href="https://github.com/LearnBoost/engine.io-client">engine.io-client</a>: since Radar uses engine.io internally, it needs the client file to be available</li>
<li><a href="http://mixu.net/minilog/">minilog</a>: Radar logs events on the client side using Minilog; that&#39;s mostly just because I wanted a logger that works on both the client and the server and is small (~80 lines)</li>
</ul>
<p>There are many ways in which you could include these dependencies:</p>
<ul class="list">
<li>you can just copy the distribution files from ./dist/ for the dependencies and make sure they are included on the page before the Radar client (e.g. with regular script tags)</li>
<li>you can create a single file that you can distribute</li>
</ul>
<p>The first one is probably easy to figure out, so let&#39;s do the second one. Here is a <code>Makefile</code> that does that:</p>
<pre>build:
  @echo &#39;Building public/radar_client.js&#39;
  @mkdir -p public
  @cat ./node_modules/radar_client/node_modules/minilog/dist/minilog.js &gt; public/radar_client.js
  @cat ./node_modules/radar_client/node_modules/engine.io-client/dist/engine.io.js &gt;&gt; public/radar_client.js
  @cat ./node_modules/radar_client/dist/radar_client.js &gt;&gt; public/radar_client.js
  # uncomment if you want to use uglifyJS to further minify the file @uglifyjs --overwrite public/radar_client.js
  @echo &#39;Wrote public/radar_client.js&#39;

.PHONY: build</pre>
<p>Note that GNU make requires that you use tabs for indentation and it will not be helpful in telling you to that.</p>
<h3>3. Putting the two together</h3>
<p>...</p>
<h1>Radar client</h1>
<p>Read the <a href="client.html">client docs</a> for the details.</p>
<h1>Radar server</h1>
<p>Read the <a href="server.html">server docs</a> for the details.</p>
<h1>REST API</h1>
<p>Read the <a href="rest.html">REST API docs</a> for the details.</p>
<h2>Copyright and License</h2>
<p>Radar is Copyright 2012, Zendesk Inc.</p>
<p>Licensed under the Apache License Version 2.0, <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>



      </div>
    </div>

    <div class="clear">
    </div>

    <div id="footer">
    </div>
  </div>
</body>
</html>
